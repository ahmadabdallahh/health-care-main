# ๐ง ุฏููู ุฅุตูุงุญ ูุงุนุฏุฉ ุงูุจูุงูุงุช

## ุงููุดููุฉ ุงููุจูุบ ุนููุง
```
CREATE INDEX idx_doctors_hospital ON doctors(hospital_id); 
MySQL said: Documentation #1072 - Key column 'hospital_id' doesn't exist in table
```

## ุณุจุจ ุงููุดููุฉ
ูุงู ุงูุฎุทุฃ ูุญุฏุซ ูุฃู:
1. ุฌุฏูู `doctors` ุงูุฃุตูู ูุง ูุญุชูู ุนูู ุนููุฏ `hospital_id`
2. ูุงู ูุชู ูุญุงููุฉ ุฅูุดุงุก ููุฑุณ ุนูู ุนููุฏ ุบูุฑ ููุฌูุฏ
3. ูู ูุชู ุฅุถุงูุฉ ุงูุนููุฏ ูุจู ุฅูุดุงุก ุงูููุฑุณ

## ุงูุญู ุงููุทุจู

### 1. ุฅูุดุงุก ููู SQL ุฌุฏูุฏ
ุชู ุฅูุดุงุก ููู `SQL/reminder_tables.sql` ุงูุฐู ูุญุชูู ุนูู:

#### ุฃ. ุฅุถุงูุฉ ุงูุฃุนูุฏุฉ ุงูููููุฏุฉ ุฃููุงู
```sql
-- ุฅุถุงูุฉ ุฃุนูุฏุฉ ุฌุฏูุฏุฉ ูุฌุฏูู ุงูุฃุทุจุงุก
ALTER TABLE doctors
ADD COLUMN IF NOT EXISTS hospital_id INT NULL,
ADD COLUMN IF NOT EXISTS department_id INT NULL,
ADD COLUMN IF NOT EXISTS is_active TINYINT(1) DEFAULT 1,
ADD COLUMN IF NOT EXISTS consultation_fee DECIMAL(10,2) DEFAULT 0.00,
ADD COLUMN IF NOT EXISTS bio TEXT NULL,
ADD COLUMN IF NOT EXISTS rating DECIMAL(3,2) DEFAULT 0.00,
ADD FOREIGN KEY (hospital_id) REFERENCES hospitals(id) ON DELETE SET NULL,
ADD FOREIGN KEY (department_id) REFERENCES departments(id) ON DELETE SET NULL;
```

#### ุจ. ุฅูุดุงุก ุงูุฌุฏุงูู ุงูุฌุฏูุฏุฉ
- `reminder_settings` - ุฅุนุฏุงุฏุงุช ุงูุชุฐููุฑุงุช ูููุณุชุฎุฏููู
- `reminder_logs` - ุณุฌู ุงูุชุฐููุฑุงุช ุงููุฑุณูุฉ
- `push_notifications` - ุงูุฅุดุนุงุฑุงุช ุงูููุฑูุฉ
- `cities` - ุงููุฏู
- `departments` - ุงูุฃูุณุงู
- `working_hours` - ุฃููุงุช ุงูุนูู ููุฃุทุจุงุก

#### ุฌ. ุฅูุดุงุก ุงูููุงุฑุณ ุจุนุฏ ุฅุถุงูุฉ ุงูุฃุนูุฏุฉ
```sql
-- ุฅูุดุงุก ููุงุฑุณ ูุชุญุณูู ุงูุฃุฏุงุก
CREATE INDEX idx_doctors_hospital ON doctors(hospital_id);
CREATE INDEX idx_doctors_active ON doctors(is_active);
-- ... ุจุงูู ุงูููุงุฑุณ
```

## ููููุฉ ุชุทุจูู ุงูุฅุตูุงุญ

### ุงูุฎุทูุฉ 1: ุชุดุบูู ููู SQL ุงูุฌุฏูุฏ
```bash
mysql -u username -p database_name < SQL/reminder_tables.sql
```

### ุงูุฎุทูุฉ 2: ุงุฎุชุจุงุฑ ุงูุฅุตูุงุญ
```bash
php test_database_schema.php
```

### ุงูุฎุทูุฉ 3: ุงูุชุญูู ูู ุงููุชุงุฆุฌ
ูุฌุจ ุฃู ุชุธูุฑ ุงููุชุงุฆุฌ ุงูุชุงููุฉ:
- โ ูุฌูุฏ ุนููุฏ `hospital_id` ูู ุฌุฏูู `doctors`
- โ ูุฌูุฏ ุฌููุน ุงูุฌุฏุงูู ุงูุฌุฏูุฏุฉ
- โ ูุฌูุฏ ุฌููุน ุงูููุงุฑุณ ุงููุทููุจุฉ

## ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ ุงููุถุงูุฉ

### 1. ูุธุงู ุงูุชุฐููุฑุงุช ุงููุชูุฏู
- ุชุฐููุฑุงุช ุนุจุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- ุชุฐููุฑุงุช ุนุจุฑ SMS
- ุฅุดุนุงุฑุงุช ููุฑูุฉ
- ุฅุนุฏุงุฏุงุช ูุฎุตุตุฉ ููู ูุณุชุฎุฏู

### 2. ุชุญุณููุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุฅุถุงูุฉ ุนููุฏ `role` ูููุณุชุฎุฏููู (patient, doctor, hospital)
- ุฅุถุงูุฉ ูุนูููุงุช ุงูุชุฃููู ูููุฑุถู
- ุฅุถุงูุฉ ูุนูููุงุช ุงููุฏู ูุงูููุงุทู
- ุฅุถุงูุฉ ุฃูุณุงู ุงููุณุชุดููุงุช
- ุฅุถุงูุฉ ุฃููุงุช ุงูุนูู ููุฃุทุจุงุก

### 3. ููุงุฑุณ ูุญุณูุฉ ููุฃุฏุงุก
- ููุงุฑุณ ุนูู ุงูุฃุนูุฏุฉ ุงูุฃูุซุฑ ุงุณุชุฎุฏุงูุงู
- ุชุญุณูู ุณุฑุนุฉ ุงูุจุญุซ ูุงูุงุณุชุนูุงูุงุช

## ุงููููุงุช ุงููุญุฏุซุฉ

1. **`SQL/reminder_tables.sql`** - ููู SQL ุฌุฏูุฏ ูุฅุตูุงุญ ูุงุนุฏุฉ ุงูุจูุงูุงุช
2. **`test_database_schema.php`** - ุณูุฑูุจุช ุงุฎุชุจุงุฑ ููุชุญูู ูู ุงูุฅุตูุงุญ
3. **`DATABASE_FIX_GUIDE.md`** - ูุฐุง ุงูุฏููู

## ููุงุญุธุงุช ูููุฉ

- ุงุณุชุฎุฏู `IF NOT EXISTS` ูุชุฌูุจ ุฃุฎุทุงุก ุงูุชูุฑุงุฑ
- ุชู ุชุฑุชูุจ ุงูุนูููุงุช ุจุดูู ุตุญูุญ (ุฅุถุงูุฉ ุงูุฃุนูุฏุฉ ุฃููุงูุ ุซู ุงูููุงุฑุณ)
- ุฌููุน ุงูุฌุฏุงูู ุงูุฌุฏูุฏุฉ ุชุฏุนู ุงูููุฒุงุช ุงููุทููุจุฉ ูู TODO list

## ุงูุชุญูู ูู ุงููุฌุงุญ

ุจุนุฏ ุชุทุจูู ุงูุฅุตูุงุญุ ูุฌุจ ุฃู ุชุนูู ุฌููุน ุงูููุฒุงุช ุงูุชุงููุฉ:
- โ ุงูุจุญุซ ุนู ุงูุฃุทุจุงุก ุญุณุจ ุงูุชุฎุตุต ูุงููููุน
- โ ุญุฌุฒ ุงูููุงุนูุฏ ูุน ุงูุชุฐููุฑุงุช
- โ ุฅุฏุงุฑุฉ ุฅุนุฏุงุฏุงุช ุงูุชุฐููุฑุงุช
- โ ุนุฑุถ ุฃููุงุช ุงูุดูุงุบุฑ ุงููุนููุฉ
- โ ูุธุงู ุงูุชููููุงุช ูุงููุฑุงุฌุนุงุช 